## 1. 自定义组件
#### 为什么要用自定义组件？

比如，对喜欢内容的“红心”功能，在浏览页面和“我喜欢”那些旮旯都会出现

不同页面，用一样的效果，有人可能会说，那我ctrl+c/v不就ok？！

踩坑元老tell you ：如果直接将代码ctrl+c/v，会很麻烦（因为这种带外观的模块不同于js的函数，只copy对应的js代码就好了，它还有wxml和wxss代码，每次用的时候都要ctrl+c/v三次，真的hin麻烦T~T）

**那肿么办捏？？？**

[【自定义组件 | 微信开放文档】](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/)说了——>页面内的功能模块抽象成自定义组件，以便在不同的页面中重复使用；也可以将复杂的页面拆分成多个低耦合的模块，有助于代码维护。
#### 太太太。。官方了，肺话不多说，同雷港掂用~
1. 创建自定义组件

    组成 —— json wxml wxss js 4个文件
    
    要编写自定义组件，需先在 json 文件声明（将这一组文件设为自定义组件）：
```json
{
  "component": true
}
// 同时，还要在 wxml 文件中写组件模板，wxss 文件中写样式！
```


2. 使用自定义组件

    首先要在页面的 json 文件中进行引用声明
    
    需提供自定义组件的标签名和文件路径
```json
{
  "usingComponents": {
    "component-tag-name": "path/to/the/custom/component"
  }
}
//路径可能因为使用components/like/index这样的相对路径导致出错，
  它是在pages目录下进行查找，../../才能返回根目录
  可要从根目录下（绝对路径）进行查找才能找到（在路径前加一个/）
```

## 2. page样式的应用
所有的页面，小程序在外部自动包裹了个page{}，全局样式可以直接写在app.wxss的 page{ }中（如果自定义一个xx类，再写样式比较麻烦。）

全局样式给了统一默认的行为，普通的page页面会直接引用到，如果组件有重写样式，则会被覆盖。

组件在被引用的时候，就自动被引入page，但也并非所有样式都能被组件继承

继承样式，如 font 、 color ，会从组件外继承到组件内

（组件一般需要较封闭的空间，不能让全局的样式随便影响组件）
## 3. 消除文字上下的空白间距
line-height的值设置为字体大小，消除间距可以实现往上/下偏移的效果

不消除无意义的空白会让组件的整体变大，从而影响外部的排列

## 4. flex消除容器里item的块级特性

虽然设置display为flex可以让容器里的item实现浮动

但容器本身还是块级元素，宽度依旧占据整行，给它设置宽度可以消除

但是定高会导致组件通用性会变弱

**如果宽度会变化，就不能把容器宽度定死，需要自适应**

inline-flex可以消除块状特性，同时保持flex的特性，也就是让里边元素把容器撑大，实现自适应

但是有一个弊端，当临界点（比如数值从1变成100）的时候，页面会产生跳动的效果，体验不好

**解决办法**：处理动态数字的时候，可以定宽度，然后概要显示数值，比如1k

但大多数情况下，是不会赶巧遇到数值进位产生跳动的，所以用inline-flex也有很大的好处

## 4. 组件事件与事件处理
1. 选中触发事件的区域
- 在组件容器后添加bindtap可以监听到用户的点击事件
2. 处理点击事件
- 在bindtap后边加="函数名"以处理点击事件
- 在js文件Component({ })的组件的方法列表methods: { }写函数代码,处理业务逻辑
具体看 官网
[【事件 | 微信开放文档】](https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html#%E4%BA%8B%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F)
## 5. 数据来源的三种途径
1. wxml（数据写死不做更改，一般图片的src会直接写在wxml）
2. js ——> wxml（数据绑定，定义在js的data中，更新数据用setData方法）
3. 服务器 ——> js ——> wxml

如何从服务器加载数据？

生命周期函数onLoad监听页面加载，最快地从服务器发起请求，拿取数据
## 6. 三元表达式与图片切换
```js
like:true,
count1:1,
count2:2

//{{like?count1:count2}}
```
普通变量可以直接在三元表达式中书写

但如果是图片类，src里的值就是字符串了，需要在外部加引号

因为src本来在外部就有双引号""，所以，表达式里的图片路径要加单引号''

但是图片路径太长，在wxml文件显示阅读效果差，不利于代码维护，所以，考虑优化：
在js里声明图片路径的变量，然后再加载到wxml
## 7. 组件的properties属性（对外）
它是一个object对象，有4个定义段：
1. type（属性类型/单个，必填）
2. optionalTypes（属性类型/多个）
3. value（属性的初始值）
4. observer（属性值变化时的回调函数）

详情看官网——>[【component | 微信开放文档】](https://developers.weixin.qq.com/miniprogram/dev/reference/api/Component.html)


